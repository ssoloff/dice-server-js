language: node_js
node_js:
  - "6.9.1"
addons:
  firefox: "latest"
before_install:
  - ./.travis/init-env
  - ./.travis/install-geckodriver
  - ./.travis/start-xvfb
  - . ./.travis/env.sh
  - export DISPLAY=$ENV_DISPLAY
  - export PATH=$PATH:$ENV_LOCAL_BIN_DIR
install:
  - npm install --global gulp-cli
  - npm install
  - npm run init
script:
  - gulp unit-test-with-coverage
  - gulp dist
  - gulp start-server
  - gulp acceptance-test
  - gulp stop-server
  - gulp check
  - gulp docs
after_script:
  - gulp publish-coverage
