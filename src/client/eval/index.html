<!--
Copyright (c) 2015-2017 Steven Soloff

This is free software: you can redistribute it and/or modify it under the
terms of the MIT License (https://opensource.org/licenses/MIT).
This software comes with ABSOLUTELY NO WARRANTY.
-->
<form id="main-eval-expressionForm">
    <div>
        <label for="main-eval-expressionText">Expression:</label>
        <input id="main-eval-expressionText" required type="text">
        <button id="main-eval-evaluate" type="submit">Evaluate</button>
        <a href="#" id="main-eval-toggleHelp">help</a>
    </div>
    <div>
        <label>Rounding mode:</label>
        <input checked id="main-eval-roundingModeNone" name="roundingMode" type="radio" value="">No rounding
        <input id="main-eval-roundingModeTruncate" name="roundingMode" type="radio" value="trunc">Round towards zero
        <input id="main-eval-roundingModeFloor" name="roundingMode" type="radio" value="floor">Round down
        <input id="main-eval-roundingModeCeiling" name="roundingMode" type="radio" value="ceil">Round up
        <input id="main-eval-roundingModeNearest" name="roundingMode" type="radio" value="round">Round to nearest
    </div>
    <input id="main-eval-randomNumberGeneratorJson" type="hidden" value="">
    <input id="main-eval-requestId" type="hidden" value="pending">
    <input id="main-eval-correlationId" type="hidden" value="unknown">
</form>
<div class="main-eval-help" id="main-eval-help">
    <h2>Help</h2>
    <h3>Dice notation</h3>
    <p>
        The following table describes the basic <a href="https://en.wikipedia.org/wiki/Dice_notation" target="_blank">dice notation</a>
        that can be used within an expression.
    </p>
    <table>
        <thead>
            <tr>
                <th>Example</th>
                <th>Description</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1d8</td>
                <td>Roll one d8.</td>
                <td>
                    You can roll any number of dice (e.g. 2d8, 5d8, 42d8) and dice with any number of sides
                    (e.g. 1d2, 1d10, 1d42). If multiple dice are rolled, the result is the sum of each die roll.
                    <strong>Note:</strong> To roll a single die, you must explicitly specify a roll count of one -- d8
                    is not a valid dice roll expression.
                </td>
            </tr>
            <tr>
                <td>3d6+1</td>
                <td>Roll three d6s, sum the results, and add one.</td>
                <td>
                    You can use the following arithmetic operations with any two expressions: addition (+),
                    subtraction (-), multiplication (*), division (/), and modulo (%).
                </td>
            </tr>
            <tr>
                <td>d%</td>
                <td>
                    Roll percentile dice (i.e. roll two d10s to generate a result between 1 and 100).
                </td>
                <td>
                    You can roll one additional d10 for each 0 you place after d% (e.g. d%0 will roll permilletile dice,
                    i.e. roll three d10s to generate a result between 1 and 1000).
                </td>
            </tr>
            <tr>
                <td>4d6-L</td>
                <td>Roll four d6s, drop the lowest roll, and sum the remaining three results.</td>
                <td>
                    You can drop more than one die by prefixing the command with an integer (e.g. 4d6-2L will drop the
                    two lowest rolls). You can also drop the highest roll(s) (e.g. 4d6-H).
                </td>
            </tr>
            <tr>
                <td>4d6+H</td>
                <td>Roll four d6s, clone the highest roll, and sum all five results.</td>
                <td>
                    You can clone more than one die by prefixing the command with an integer (e.g. 4d6+2H will clone the
                    two highest rolls). You can also clone the lowest roll(s) (e.g. 4d6+L).
                </td>
            </tr>
        </tbody>
    </table>
    <h3>Rounding modes</h3>
    <p>
        The following table explains the available rounding modes which control how fractional values are
        <a href="https://en.wikipedia.org/wiki/Rounding#Rounding_to_integer" target="_blank">rounded</a> in an
        expression result. The global rounding mode only affects operations which may result in fractional values, such
        as division (/) and modulo (%).
    </p>
    <table>
        <thead>
            <tr>
                <th>Rounding Mode</th>
                <th>Examples</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>No rounding</td>
                <td>
                    <ul>
                        <li>1.5 → 1.5</li>
                        <li>-1.5 → -1.5</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Round towards zero</td>
                <td>
                    <ul>
                        <li>1.5 → 1</li>
                        <li>-1.5 → -1</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Round down</td>
                <td>
                    <ul>
                        <li>1.5 → 1</li>
                        <li>-1.5 → -2</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Round up</td>
                <td>
                    <ul>
                        <li>1.5 → 2</li>
                        <li>-1.5 → -1</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Round to nearest</td>
                <td>
                    <ul>
                        <li>1.5 → 2</li>
                        <li>1.49 → 1</li>
                        <li>-1.5 → -1</li>
                        <li>-1.51 → -2</li>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>
    <h3>Additional operators</h3>
    <p>
        The following table explains additional operators that are available when evaluating a dice notation expression.
    </p>
    <table>
        <thead>
            <tr>
                <th>Operator</th>
                <th>Example</th>
                <th>Description</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Grouping</td>
                <td>3*(1d6+1)</td>
                <td>Roll one d6, add one, and multiply the sum by three.</td>
                <td>
                    Use parentheses to group operations and override the default operator precedence.
                </td>
            </tr>
            <tr>
                <td>Unary plus</td>
                <td>+1</td>
                <td>The literal positive one.</td>
                <td>
                    Can be applied to any expression.
                </td>
            </tr>
            <tr>
                <td>Unary negation</td>
                <td>-1</td>
                <td>The literal negative one.</td>
                <td>
                    Can be applied to any expression.
                </td>
            </tr>
            <tr>
                <td>Divide and round towards zero</td>
                <td>1 // 2</td>
                <td>Divide 1 by 2 (0.5) and round towards zero (0).</td>
                <td>
                    Always ignores the selected global rounding mode.
                </td>
            </tr>
            <tr>
                <td>Divide and round to nearest</td>
                <td>1 /~ 2</td>
                <td>Divide 1 by 2 (0.5) and round to nearest (1).</td>
                <td>
                    Always ignores the selected global rounding mode.
                </td>
            </tr>
            <tr>
                <td>Divide and round down</td>
                <td>1 /- 2</td>
                <td>Divide 1 by 2 (0.5) and round down (0).</td>
                <td>
                    Always ignores the selected global rounding mode.
                </td>
            </tr>
            <tr>
                <td>Divide and round up</td>
                <td>1 /+ 2</td>
                <td>Divide 1 by 2 (0.5) and round up (1).</td>
                <td>
                    Always ignores the selected global rounding mode.
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="main-eval-error" id="main-eval-errorMessage">
    &nbsp;
</div>
